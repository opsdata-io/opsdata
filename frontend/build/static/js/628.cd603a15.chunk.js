"use strict";(self.webpackChunkopsdata=self.webpackChunkopsdata||[]).push([[628],{6628:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});var s=r(5043),a=r(3216),n=r(3862),o=r(5963),l=r(579);const c=e=>{let{value:t,onChange:r}=e;const[a,c]=(0,s.useState)([]),[u,i]=(0,s.useState)(""),[d,h]=(0,s.useState)("");(0,s.useEffect)((()=>{(async()=>{const e=(0,o.gf)();try{const t=await(0,n.od)(e);c(t)}catch(d){console.error("Error fetching customers:",d),h("Failed to fetch customers")}})()}),[]);return(0,l.jsxs)("div",{children:[d&&(0,l.jsx)("p",{style:{color:"red"},children:d}),(0,l.jsx)("select",{value:t,onChange:e=>r(e.target.value),children:a.map((e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id)))}),(0,l.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=(0,o.gf)();try{const e=await(0,n.ff)({name:u},t);c([...a,e]),i(""),r(e.id),h("")}catch(d){console.error("Error creating customer:",d),h("Error creating customer. Please try again.")}},children:[(0,l.jsx)("input",{type:"text",value:u,onChange:e=>i(e.target.value),placeholder:"New Customer Name"}),(0,l.jsx)("button",{type:"submit",children:"Create Customer"})]})]})},u=()=>{const[e,t]=(0,s.useState)(""),[r,a]=(0,s.useState)(""),[u,i]=(0,s.useState)(""),[d,h]=(0,s.useState)(""),[j,g]=(0,s.useState)(""),[m,p]=(0,s.useState)("");return(0,l.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),g(""),p("");try{const s={customer:e,caseNumber:r,subject:u,notes:d},l=(0,o.gf)(),c=await(0,n.uJ)(s,l);console.log("Upload link created:",c),p("Upload link created successfully."),t(""),a(""),i(""),h("")}catch(j){console.error("Error creating upload link:",j),g("Failed to create upload link. Please try again.")}},children:[(0,l.jsx)("label",{htmlFor:"customer",children:"Customer:"}),(0,l.jsx)(c,{value:e,onChange:t}),(0,l.jsx)("br",{}),(0,l.jsx)("label",{htmlFor:"caseNumber",children:"Case Number:"}),(0,l.jsx)("input",{id:"caseNumber",type:"text",value:r,onChange:e=>a(e.target.value),required:!0}),(0,l.jsx)("br",{}),(0,l.jsx)("label",{htmlFor:"subject",children:"Subject:"}),(0,l.jsx)("input",{id:"subject",type:"text",value:u,onChange:e=>i(e.target.value),required:!0}),(0,l.jsx)("br",{}),(0,l.jsx)("label",{htmlFor:"notes",children:"Notes:"}),(0,l.jsx)("textarea",{id:"notes",value:d,onChange:e=>h(e.target.value),required:!0}),(0,l.jsx)("br",{}),(0,l.jsx)("button",{type:"submit",children:"Create Upload Link"}),j&&(0,l.jsx)("div",{style:{color:"red"},children:j}),m&&(0,l.jsx)("div",{style:{color:"green"},children:m})]})},i=()=>{const{link:e}=(0,a.g)(),t=(0,o.gf)();return(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{children:"Upload your file"}),(0,l.jsx)(u,{link:e,token:t})]})}},3862:(e,t,r)=>{r.d(t,{HF:()=>d,Si:()=>c,ff:()=>i,iD:()=>l,od:()=>u,uJ:()=>h});var s=r(854),a=r.n(s),n=r(5963);const o=a().create({baseURL:"/api"});o.interceptors.request.use((async e=>{const t=(0,n.gf)();return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e)));const l=e=>o.post("/login",e),c=()=>o.get("/files"),u=()=>o.get("/customers"),i=e=>o.post("/customers",e),d=()=>o.get("/version"),h=e=>o.post("/create-link",e)}}]);
//# sourceMappingURL=628.cd603a15.chunk.js.map